#+TITLE: =System configuration=
#+AUTHOR: Haider Mirza
* Table of contents :toc:
- [[#about-this-config][About This Config]]
- [[#configscm][Config.scm]]
- [[#channelsscm][Channels.scm]]

* About This Config
  This is my GNU Guix system configuration applied on my system.
* Config.scm
  This is the config file used in GNU Guix to manage your system.
#+BEGIN_SRC scheme :tangle "/sudo::/etc/config.scm"
  ;; This file should be edited in ~/Dotfiles/System.org then tangled.
  (use-modules (gnu)
	       (gnu packages emacs)
	       (gnu packages emacs-xyz)
	       (gnu packages xorg)
	       (gnu packages certs)
	       (gnu packages mail)
	       (gnu packages vim)
	       (gnu packages cups)
	       (gnu packages gcc))

  (use-service-modules
   cups
   desktop
   networking
   ssh
   xorg)

  (operating-system
   (locale "en_GB.utf8")
   (timezone "Europe/London")
   (keyboard-layout (keyboard-layout "gb" "extd"))
   (host-name "xps")
   (users (cons* (user-account
		  (name "haider")
		  (comment "Haider")
		  (group "users")
		  (home-directory "/home/haider")
		  (supplementary-groups
		   '("wheel"
		     "netdev"
		     "audio"
		     "video")))

		 (user-account
		  (name "hasan")
		  (comment "Hasan")
		  (group "users")
		  (home-directory "/home/hasan")
		  (supplementary-groups
		   '("netdev"
		     "audio"
		     "video")))
		 %base-user-accounts))

   (packages (append (list
		      ;; EXWM
		      emacs
		      emacs-exwm
		      emacs-desktop-environment
		      ;; Emacs packages
		      emacs-org-roam
		      emacs-org-reveal
		      mu
		      gcc
		      gcc-toolchain

		      ;; for HTTPS access
		      nss-certs)
		     %base-packages))
   (services
    (append
     (list (service xfce-desktop-service-type)
	   (service openssh-service-type)
	   (service cups-service-type)
	   (set-xorg-configuration
	    (xorg-configuration
	     (keyboard-layout keyboard-layout))))
     %desktop-services))

   (bootloader
    (bootloader-configuration
     (bootloader grub-bootloader)
     (targets (list "/dev/sda"))
     (keyboard-layout keyboard-layout)))

   (swap-devices
    (list (swap-space
	   (target
	    (uuid "5a3b335d-4d35-48e5-84b9-2df556187504")))))

   (mapped-devices
    (list (mapped-device
	   (source
	    (uuid "97b8d753-0d52-488d-bfcc-229d00b0248c"))
	   (target "guix")
	   (type luks-device-mapping))))

   (file-systems
    (cons* (file-system
	    (mount-point "/")
	    (device "/dev/mapper/guix")
	    (type "ext4")
	    (dependencies mapped-devices))
	   %base-file-systems)))
#+END_SRC

* Channels.scm
  If you dont want to just use the default channels for whatever reason, place this file in ~/.config/guix to use the nonguix and flat channels.
  *NOTE:* I do not recommend this in any capacity. This is only for reference and I dont even personally use it as a sincere follower of the free software philosophy.

  #+BEGIN_SRC scheme
    (list (channel
	    (name 'guix)
	    (url "https://git.savannah.gnu.org/git/guix.git")
	    (introduction
	      (make-channel-introduction
		"9edb3f66fd807b096b48283debdcddccfea34bad"
		(openpgp-fingerprint
		  "BBB0 2DDF 2CEA F6A8 0D1D  E643 A2A0 6DF2 A33A 54FA"))))
	  (channel
	    (name 'nonguix)
	    (url "https://gitlab.com/nonguix/nonguix"))
	  (channel
	    (name 'flat)
	    (url "https://github.com/flatwhatson/guix-channel.git")
	    (introduction
	      (make-channel-introduction
		"33f86a4b48205c0dc19d7c036c85393f0766f806"
		(openpgp-fingerprint
		  "736A C00E 1254 378B A982  7AF6 9DBE 8265 81B6 4490")))))

  #+END_SRC
